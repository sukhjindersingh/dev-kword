{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Design_TaoBao.kick","options":{"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_wrappedobj":false,"compat_filterproto":false,"compat_prototypes":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":false,"run_at":"document-end"},"enabled":false,"position":2,"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgRGVzaWduX1Rhb0Jhby5raWNrCi8vIEBuYW1lc3BhY2UgIGtpY2sKLy8gQHZlcnNpb24gICAgMC4xYgovLyBAZGVzY3JpcHRpb24gIGVudGVyIHNvbWV0aGluZyB1c2VmdWwKLy8gQGluY2x1ZGUgICAgKjovL2Rlc2lnbi50YW9iYW8uY29tLyoKLy8gQHJlcXVpcmUgICAgaHR0cDovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS42Lm1pbi5qcwovLyBAY29weXJpZ2h0ICAyMDExKywgQGtpY2sKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24od2luZG93LGRvY3VtZW50KXsKICAgIHZhciBMT0c9ZnVuY3Rpb24odil7Y29uc29sZS5lcnJvcih2KTt9OwoKICAgIAogICAgCQl2YXIgX2NzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CgkJX2Nzcy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2tfY3NzJyk7CgkJX2Nzcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTsKICAgIF9jc3MuaW5uZXJIVE1MID0KICAgICAgICAiLnVpLWRpYWxvZywudWktZGlhbG9nLWRkLC51aS1kaWFsb2ctYmQsLmtzLWRpYWxvZy5rcy1zdGRtb2QtYm9keSwudWktZGlhbG9nLWJkIGlmcmFtZSwua2Utd2Via2l0LC5rZS10ZXh0YXJlYS13cmFwLC5zZXR0aW5nLC5zZXR0aW5nLW1vZC1jdXN0b20gdGFibGUsZGl2LnVpLWRpYWxvZyBpZnJhbWUuaWZye3dpZHRoOjEwMCUhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDt0b3A6MzBweCFpbXBvcnRhbnR9IisKICAgICAgICAiLnVpLWRpYWxvZ3twb3NpdGlvbjpmaXhlZH0iKwogICAgICAgICIua2UtdGV4dGFyZWEtd3JhcHtoZWlnaHQ6NjAwcHggIWltcG9ydGFudDsiOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChfY3NzKTsKCn0pKHdpbmRvdyxkb2N1bWVudCkKCg=="},{"name":"chrome.userScript.kick","options":{"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_wrappedobj":false,"compat_filterproto":false,"compat_prototypes":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":false,"run_at":"document-end"},"enabled":false,"position":3,"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgY2hyb21lLnVzZXJTY3JpcHQua2ljawovLyBAbmFtZXNwYWNlICAgCi8vIEB2ZXJzaW9uICAgIDEuMC4wLmEKLy8gQGRlc2NyaXB0aW9uICBlbnRlciBzb21ldGhpbmcgdXNlZnVsCi8vIEBpbmNsdWRlICAgIGh0dHA6Ly8qLyoKLy8gQHJlcXVpcmUgICAgaHR0cDovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS42Lm1pbi5qcwovLyBAY29weXJpZ2h0ICAyMDExKywga2ljawovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50KSB7CiAgICBpZih3aW5kb3cgIT0gd2luZG93LnRvcCkgcmV0dXJuOyAgICAgCgl2YXIgX0QgPSBmdW5jdGlvbihfb2JqKSB7CgkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChfb2JqKTsKCX0KCXZhciBMT0cgPSBmdW5jdGlvbihlKSB7CgkJY29uc29sZS5lcnJvcihuZXcgRGF0ZSgpICsgIiA6ICIgKyBlKTsKCX0KCXZhciBnID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAKalF1ZXJ5LmZuLmRyYWcgPSBmdW5jdGlvbigpeyAgCiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ICAKICAgICAgICB2YXIgZHJhZ2luZyA9IGZhbHNlOyAgCiAgICAgICAgdmFyIHN0YXJ0TGVmdCxzdGFydFRvcDsgIAogICAgICAgIHZhciBzdGFydFgsc3RhcnRZOwogICAgICAgICAgCiAgICAgICAgJCh0aGlzKS5jc3MoJ2N1cnNvcicsJ21vdmUnKTsKICAgICAgICAkKHRoaXMpLm1vdXNlZG93bihmdW5jdGlvbihldmVudCl7CiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpOyAgCiAgICAgICAgICAgIHN0YXJ0TGVmdCA9IG9mZnNldC5sZWZ0OyAgCiAgICAgICAgICAgIHN0YXJ0VG9wID0gb2Zmc2V0LnRvcDsgIAogICAgICAgICAgICBzdGFydFggPSBldmVudC5jbGllbnRYOyAgCiAgICAgICAgICAgIHN0YXJ0WSA9IGV2ZW50LmNsaWVudFk7ICAKICAgICAgICAgICAgZHJhZ2luZyA9IHRydWU7CiAgICAgICAgICAgIExPRygiZG93biIpOwoJCQkKICAgICAgICB9KS5tb3VzZW1vdmUoZnVuY3Rpb24oZXZlbnQpeyAgCiAgICAgICAgICAgIGlmIChkcmFnaW5nID09IGZhbHNlKXJldHVybjsgIAogICAgICAgICAgICB2YXIgZGVsdGFYID0gZXZlbnQuY2xpZW50WCAtIHN0YXJ0WDsgIAogICAgICAgICAgICB2YXIgZGVsdGFZID0gZXZlbnQuY2xpZW50WSAtIHN0YXJ0WTsgIAogICAgICAgICAgICB2YXIgbGVmdCA9IHN0YXJ0TGVmdCArIGRlbHRhWDsgIAogICAgICAgICAgICB2YXIgdG9wID0gc3RhcnRUb3AgKyBkZWx0YVk7ICAKICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2xlZnQnLGxlZnQrJ3B4JykuY3NzKCd0b3AnLHRvcCsncHgnKTsgCiAgICAgICAgICAgIExPRygibW91c2Vtb3ZlIik7ICAgICAgICAgICAgCiAgICAgICAgfSkubW91c2V1cChmdW5jdGlvbihldmVudCl7ICAKICAgICAgICAgICAgZHJhZ2luZyA9IGZhbHNlOwogICAgICAgICAgICBMT0coIm1vdXNldXAiKTsgCgkJfSk7CiAgICB9KTsgIAp9ICAgIAogICAgCiAgICAKLy8gICAgZXZhbChmdW5jdGlvbihwLGEsYyxrLGUscil7ZT1mdW5jdGlvbihjKXtyZXR1cm4gYy50b1N0cmluZygzNil9O2lmKCcwJy5yZXBsYWNlKDAsZSk9PTApe3doaWxlKGMtLSlyW2UoYyldPWtbY107az1bZnVuY3Rpb24oZSl7cmV0dXJuIHJbZV18fGV9XTtlPWZ1bmN0aW9uKCl7cmV0dXJuJ1swLTlhLWpdJ307Yz0xfTt3aGlsZShjLS0paWYoa1tjXSlwPXAucmVwbGFjZShuZXcgUmVnRXhwKCdcXGInK2UoYykrJ1xcYicsJ2cnKSxrW2NdKTtyZXR1cm4gcH0oJ2pRdWVyeS5mbi5kcmFnPTIoKXtlIDMuZWFjaCgyKCl7MCA0PTg7MCA5LGE7MCBiLGM7JCgzKS5kKFwnY3Vyc29yXCcsXCdtb3ZlXCcpOyQoMykubW91c2Vkb3duKDIoMSl7MCA1PSQoMykuNSgpOzk9NS42O2E9NS43O2I9MS5mO2M9MS5nOzQ9dHJ1ZX0pLm1vdXNlbW92ZSgyKDEpe2lmKDQ9PTgpZTswIGg9MS5mLWI7MCBpPTEuZy1jOzAgNj05K2g7MCA3PWEraTskKDMpLmQoXCc2XCcsNitcJ2pcJykuZChcJzdcJyw3K1wnalwnKX0pLm1vdXNldXAoMigxKXs0PTh9KX0pfScsW10sMjAsJ3ZhcnxldmVudHxmdW5jdGlvbnx0aGlzfGRyYWdpbmd8b2Zmc2V0fGxlZnR8dG9wfGZhbHNlfHN0YXJ0TGVmdHxzdGFydFRvcHxzdGFydFh8c3RhcnRZfGNzc3xyZXR1cm58Y2xpZW50WHxjbGllbnRZfGRlbHRhWHxkZWx0YVl8cHgnLnNwbGl0KCd8JyksMCx7fSkpCgogICAgZnVuY3Rpb24gaW5pdCgpIHsgCgkJdmFyIF9kcmFnRElWID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgkJX2RyYWdESVYuc2V0QXR0cmlidXRlKCdpZCcsICdrX2RyYWcnKTsKCQlfZHJhZ0RJVi5pbm5lckhUTUwgPSAiICAgRHJhZyAgQGtpY2sgICI7CiAgICAgICAgCgkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChfZHJhZ0RJVik7CiAgICAgICAgCgkJdmFyIF9jc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwoJCV9jc3Muc2V0QXR0cmlidXRlKCdpZCcsICdfY3NzJyk7CgkJX2Nzcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTsKCQlfY3NzLmlubmVySFRNTCA9ICIja19kcmFne3Bvc2l0aW9uOmZpeGVkO3dpZHRoOjQwMHB4O2hlaWdodDozMDBweDt0b3A6MjBweDtyaWdodDoxMHB4O2JvcmRlcjoxcHggc29saWQgcmVkO3otaW5kZXg6OTk5OTt9IjsgLy/mi5bliqggQ1NTIOagt+W8jyAKICAgICAgICAgICAgCgkJZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChfY3NzKTsKCgkJJCgiI2tfZHJhZyIpLmRyYWcoKTsKCgl9CgoJZnVuY3Rpb24gX2RiY2xpY2soZXZlbnQpIHsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPj0gNDAwID8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSBnICsgIiN0b3AiOiB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGcgKyAiI19qX2J1dHRvbSI7IH0KICAgIAoJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0LCBmYWxzZSk7Cgl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiZGJsY2xpY2siLCBfZGJjbGljaywgZmFsc2UpOwp9KSh3aW5kb3csIGRvY3VtZW50KTs="},{"name":"goToTop","options":{"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_wrappedobj":false,"compat_filterproto":false,"compat_prototypes":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":false,"run_at":"document-end"},"enabled":false,"position":4,"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIGdvVG9Ub3AKLy8gQHZlcnNpb24gICAgICAgIDIuMQovLyBAbmFtZXNwYWNlICAgICAgaHR0cDovL3VzZXJzY3JpcHRzLm9yZy9zY3JpcHRzL3Nob3cvMTA1NDExCi8vIEBpbmNsdWRlICAgICAgICAqCi8vIEBhdXRob3IgICAgICAgICBhbnJhbgovLyBAZGF0ZSAgICAgICAgICAgMjAxMS82LzI0Ci8vIEByZXF1aXJlICAgICAgICBodHRwOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjYubWluLmpzCi8vIEBydW4tYXQgICAgICAgICBkb2N1bWVudC1zdGFydAovLyA9PS9Vc2VyU2NyaXB0PT0KCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAg5pu05paw5pel5b+XCiAgIDEwLzIxCeiPnOWNleWPr+mAieW3puWPs+aYvuekuizlh4/lsI/op6blj5HljLrln58s5L+u5aSN5ZyodHdpdHRlciDppa3lkKbkuIvnmoQgYnVnICwg55u45YWz5Y+C5pWw6K6+572u6K+35Zyo6ISa5pys5Lit5L+u5pS5CiAgIDEwLzE5CeWFqOaWsOaYvuekuuaWueW8jyzlop7liqDlubPmu5Hmu5rliqgs6LC35q2M56uZ5YaF5pCc57SiLOebuOWFs+WPguaVsOivt+WcqOiEmuacrOW8gOWni+iuvue9rgogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovLy0tLS3lkITnp43lj4LmlbAtLS0tLy8KdmFyIHNwZWVkT2ZHb1RvVG9wID0gMTAwMDsJCQkvL+a7muWKqOWIsOmhtumDqOeahOmAn+W6piAsIOi2iuWkp+i2iuaFoiAsIDDkuLrlhbPpl60KdmFyIHNwZWVkT2ZHb1RvQm90dG9tID0gMTAwMDsJCS8v5rua5Yqo5Yiw5bqV6YOo55qE6YCf5bqmICwg6LaK5aSn6LaK5oWiICwgMOS4uuWFs+mXrQp2YXIgcG9zaXRpb24gPSAibGVmdCI7CQkJCS8v6Z2i5p2/5L2N572uCgovLy0tLS3ohJrmnKzlvIDlp4stLS0tLy8KaW5pdCgpOwpmdW5jdGlvbiBpbml0KCkgewoJdmFyIG1hcmdpbkxlZnQxID0gIjg1cHgiOwoJdmFyIG1hcmdpbkxlZnQyID0gIjJweCI7CgkKCWlmKHdpbmRvdyAhPSB3aW5kb3cudG9wKQoJCXJldHVybjsKCQoJaWYocG9zaXRpb24gPT0gImxlZnQiKXsKCQlwb3NpdGlvbis9IjowcHg7IgoJCW1hcmdpbkxlZnQxID0gIi0iICsgbWFyZ2luTGVmdDE7CgkJbWFyZ2luTGVmdDIgPSAiLSIgKyBtYXJnaW5MZWZ0MjsKCX0gZWxzZSB7CgkJcG9zaXRpb24rPSI6ODVweDsiCgl9CgkKCS8v6K6+572u5qC35byPCgl2YXIgY3NzID0gIlwKCQl1bCNuYXZpZ2F0aW9uTWVudSB7XAoJCQlwb3NpdGlvbjogZml4ZWQ7XAoJCQltYXJnaW46IDBweDtcCgkJCXBhZGRpbmc6IDBweDtcCgkJCXRvcDogMjAlOyIKCQkJKyBwb3NpdGlvbiArCgkJCSJsaXN0LXN0eWxlOiBub25lO1wKCQkJei1pbmRleDo5OTk5O1wKCQl9XAoJCXVsI25hdmlnYXRpb25NZW51IGxpIHtcCgkJCXdpZHRoOiAyMHB4O1wKCQl9XAoJCXVsI25hdmlnYXRpb25NZW51IGxpIGEge1wKCQkJZGlzcGxheTogYmxvY2s7XAoJCQltYXJnaW4tbGVmdDogLTJweDtcCgkJCXdpZHRoOiAxMDBweDtcCgkJCWhlaWdodDogNzBweDtcCgkJCWJhY2tncm91bmQtY29sb3I6I0NGQ0ZDRjtcCgkJCWJhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtcCgkJCWJhY2tncm91bmQtcG9zaXRpb246Y2VudGVyIGNlbnRlcjtcCgkJCWJvcmRlcjoxcHggc29saWQgI0FGQUZBRjtcCgkJCS1tb3otYm9yZGVyLXJhZGl1czoxMHB4IDEwcHggMTBweCAxMHB4O1wKCQkJLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMTBweDtcCgkJCS13ZWJraXQtYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDEwcHg7XAoJCQkta2h0bWwtYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDEwcHg7XAoJCQkta2h0bWwtYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDEwcHg7XAoJCQktbW96LWJveC1zaGFkb3c6IDBweCA0cHggM3B4ICMwMDA7XAoJCQktd2Via2l0LWJveC1zaGFkb3c6IDBweCA0cHggM3B4ICMwMDA7XAoJCQlvcGFjaXR5OiAwLjY7XAoJCQlmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKG9wYWNpdHk9NjApO1wKCQl9XAoJCS8qKuWbvuagh+iHquWumuS5iSovXAoJCXVsI25hdmlnYXRpb25NZW51IC5nb1RvVG9wIGF7XAoJCQliYWNrZ3JvdW5kLWltYWdlOiB1cmwoaHR0cDovL2IuZHJ5aWNvbnMuY29tL2ltYWdlcy9pY29uX3NldHMvY29xdWV0dGVfcGFydF81X2ljb25zX3NldC9wbmcvNjR4NjQvZ3JlZW5fYXJyb3dfdXAucG5nKTtcCgkJfVwKCQl1bCNuYXZpZ2F0aW9uTWVudSAuZ29Ub0JvdHRvbSBhICAgICAge1wKCQkJYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHA6Ly9jLmRyeWljb25zLmNvbS9pbWFnZXMvaWNvbl9zZXRzL2NvcXVldHRlX3BhcnRfNV9pY29uc19zZXQvcG5nLzY0eDY0L2dyZWVuX2Fycm93X2Rvd24ucG5nKTtcCgkJfVwKCQl1bCNuYXZpZ2F0aW9uTWVudSAuc2VhcmNoQnlHb29nbGUgYSAgICAgIHtcCgkJCWJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwOi8vdHltcGFudXMubmV0L1R1dG9yaWFscy9GaXhlZE5hdmlnYXRpb25UdXRvcmlhbC9pbWFnZXMvc2VhcmNoLnBuZyk7XAoJCX1cCgkJLyoqXAoJCXVsI25hdmlnYXRpb25NZW51IC5wb2RjYXN0cyBhICAgICAge1wKCQkJYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHA6Ly90eW1wYW51cy5uZXQvVHV0b3JpYWxzL0ZpeGVkTmF2aWdhdGlvblR1dG9yaWFsL2ltYWdlcy9pcG9kLnBuZyk7XAoJCX1cCgkJdWwjbmF2aWdhdGlvbk1lbnUgLnJzc2ZlZWQgYSAgIHtcCgkJCWJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwOi8vdHltcGFudXMubmV0L1R1dG9yaWFscy9GaXhlZE5hdmlnYXRpb25UdXRvcmlhbC9pbWFnZXMvcnNzLnBuZyk7XAoJCX1cCgkJdWwjbmF2aWdhdGlvbk1lbnUgLnBob3RvcyBhICAgICB7XAoJCQliYWNrZ3JvdW5kLWltYWdlOiB1cmwoaHR0cDovL3R5bXBhbnVzLm5ldC9UdXRvcmlhbHMvRml4ZWROYXZpZ2F0aW9uVHV0b3JpYWwvaW1hZ2VzL2NhbWVyYS5wbmcpO1wKCQl9XAoJCXVsI25hdmlnYXRpb25NZW51IC5jb250YWN0IGEgICAge1wKCQkJYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHA6Ly90eW1wYW51cy5uZXQvVHV0b3JpYWxzL0ZpeGVkTmF2aWdhdGlvblR1dG9yaWFsL2ltYWdlcy9tYWlsLnBuZyk7XAoJCX0qL1wKCQkiOwoJCQoJYWRkU3R5bGUoY3NzKTsKCQoJLy/mt7vliqDpnaLmnb8gLOmFjee9ruaYr+WQpuWPr+ingeWPiuaOkuW6jwoJJChkb2N1bWVudC5ib2R5KS5hcHBlbmQoJ1wKCQkJPHVsIGlkPSJuYXZpZ2F0aW9uTWVudSI+XAoJICAgICAgICAgICAgPGxpIGNsYXNzPSJnb1RvVG9wIj48YSBocmVmPWphdmFzY3JpcHQ6dm9pZCgwKTsgdGl0bGU9Iui3s+i9rOWIsOmhtumDqCI+PC9hPjwvbGk+XAoJICAgICAgICAgICAgPGxpIGNsYXNzPSJnb1RvQm90dG9tIj48YSBocmVmPWphdmFzY3JpcHQ6dm9pZCgwKTsgdGl0bGU9Iui3s+i9rOWIsOW6lemDqCI+PC9hPjwvbGk+XAoJICAgICAgICAgICAgPGxpIGNsYXNzPSJzZWFyY2hCeUdvb2dsZSI+PGEgaHJlZj1qYXZhc2NyaXB0OnZvaWQoMCk7IHRpdGxlPSJnb29nbGXnq5nlhoXmkJzntKIiPjwvYT48L2xpPlwKCSAgICAgICAgICAgIDwhLS3kuI3pnIDopoHnmoTlm77moIfor7fmlL7liLDkuIvpnaJcCgkgICAgICAgICAgICA8bGkgY2xhc3M9InBob3RvcyI+PGEgaHJlZj1qYXZhc2NyaXB0OnZvaWQoMCk7IHRpdGxlPSJQaG90b3MiPjwvYT48L2xpPlwKCSAgICAgICAgICAgIDxsaSBjbGFzcz0icnNzZmVlZCI+PGEgaHJlZj1qYXZhc2NyaXB0OnZvaWQoMCk7IHRpdGxlPSJSc3MgRmVlZCI+PC9hPjwvbGk+XAoJICAgICAgICAgICAgPGxpIGNsYXNzPSJwb2RjYXN0cyI+PGEgaHJlZj1qYXZhc2NyaXB0OnZvaWQoMCk7IHRpdGxlPSJQb2RjYXN0cyI+PC9hPjwvbGk+XAoJICAgICAgICAgICAgPGxpIGNsYXNzPSJjb250YWN0Ij48YSBocmVmPWphdmFzY3JpcHQ6dm9pZCgwKTsgdGl0bGU9IkNvbnRhY3QiPjwvYT48L2xpPlwKCSAgICAgICAgICAgIC0tPlwKICAgICAgICAJPC91bD4nKQogICAgICAgIAkKCS8v6Ieq5Yqo6ZqQ6JePCgkkKCcjbmF2aWdhdGlvbk1lbnUgYScpLnN0b3AoKS5hbmltYXRlKHsKCQknbWFyZ2luTGVmdCcgOiBtYXJnaW5MZWZ0MQoJfSwgMTAwMCk7CgkkKCcjbmF2aWdhdGlvbk1lbnUgPiBsaScpLmhvdmVyKGZ1bmN0aW9uKCkgewoJCSQoJ2EnLCAkKHRoaXMpKS5zdG9wKCkuYW5pbWF0ZSh7CgkJCSdtYXJnaW5MZWZ0JyA6IG1hcmdpbkxlZnQyCgkJfSwgMjAwKTsKCX0sIGZ1bmN0aW9uKCkgewoJCSQoJ2EnLCAkKHRoaXMpKS5zdG9wKCkuYW5pbWF0ZSh7CgkJCSdtYXJnaW5MZWZ0JyA6IG1hcmdpbkxlZnQxCgkJfSwgMjAwKTsKCX0pOwoJCgkvL+WKn+iDvQoJJGh0bWwgPSAkKCdodG1sLGJvZHknKS5lcSgwKTsKCQoJJCgidWwjbmF2aWdhdGlvbk1lbnUgLmdvVG9Ub3AgYSIpLmNsaWNrKGZ1bmN0aW9uKCkgewoJCSRodG1sLmFuaW1hdGUoewoJCQlzY3JvbGxUb3AgOiAwCgkJfSwgc3BlZWRPZkdvVG9Ub3ApOwoJCXJldHVybiBmYWxzZTsKCX0pOwoKCSQoInVsI25hdmlnYXRpb25NZW51IC5nb1RvQm90dG9tIGEiKS5jbGljayhmdW5jdGlvbigpIHsKCQkkaHRtbC5hbmltYXRlKHsKCQkJc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQKCQl9LCBzcGVlZE9mR29Ub0JvdHRvbSk7CgkJcmV0dXJuIGZhbHNlOwoJfSk7CgoJJCgidWwjbmF2aWdhdGlvbk1lbnUgLnNlYXJjaEJ5R29vZ2xlIGEiKS5hdHRyKCJocmVmIiwiamF2YXNjcmlwdDpxJTIwPSUyMCUyMiUyMiUyMCslMjAod2luZG93LmdldFNlbGVjdGlvbiUyMD8lMjB3aW5kb3cuZ2V0U2VsZWN0aW9uKCklMjA6JTIwZG9jdW1lbnQuZ2V0U2VsZWN0aW9uJTIwPyUyMGRvY3VtZW50LmdldFNlbGVjdGlvbigpJTIwOiUyMGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnRleHQpOyUyMGlmJTIwKCFxKSUyMHElMjA9JTIwcHJvbXB0KCUyMiVFOCVBRiVCNyVFOCVCRSU5MyVFNSU4NSVBNSVFNSU4NSVCMyVFOSU5NCVBRSVFOCVBRiU4RDolMjIsJTIwJTIyJTIyKTslMjBpZiUyMChxIT1udWxsKSUyMHt2YXIlMjBxbG9jYXRpb249JTIyJTIwJTIyO3Fsb2NhdGlvbj0oJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9zZWFyY2g/bnVtPTEwMCZobD16aC1DTiZuZXd3aW5kb3c9MSZxPScrcSsnJnNpdGVzZWFyY2g9Jytsb2NhdGlvbi5ob3N0KycnKTt3aW5kb3cub3BlbihxbG9jYXRpb24pO30lMjB2b2lkJTIwMCIpOwoJCn0KLy/lop7liqDmoLflvI8KZnVuY3Rpb24gYWRkU3R5bGUoY3NzKSB7Cgl2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwoJc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7CglzdHlsZS50ZXh0Q29udGVudCA9IGNzczsKCWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoc3R5bGUpOwp9Owo="},{"name":"YouTube HD Suite","options":{"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_wrappedobj":false,"compat_filterproto":false,"compat_prototypes":false,"compat_uW_gmonkey":false,"compat_forvarin":true,"noframes":false,"run_at":"document-end"},"enabled":true,"position":5,"update_url":"http://userscripts.org/scripts/source/39167.user.js","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFlvdVR1YmUgSEQgU3VpdGUKLy8gQG5hbWVzcGFjZSAgICAgIGh0dHA6Ly9jcmVhenkubmV0LwovLyBAZGVzY3JpcHRpb24gICAgUGVyZmVjdCBwYWNrYWdlIHRvIGVuam95IEhEIHZpZGVvcyBpbiBZb3VUdWJlLiBBbHdheXMgd2F0Y2hpbmcgb3IgZG93bmxvYWRpbmcgdGhlIGhpZ2hlc3QgcXVhbGl0eSBmb3JtYXQgKCBIRCAxMDgwcCAvIEhEIDcyMHAgLyBIUSBGTFYgLyBNUDQgaVBvZCApLiBBZGQgZG93bmxvYWQgaWNvbnMgaW4gdmlkZW8gbGlzdCBwYWdlLgovLyBAaW5jbHVkZSAgICAgICAgaHR0cDovLyoueW91dHViZS5jb20vKgovLyBAaW5jbHVkZSAgICAgICAgaHR0cDovL3lvdXR1YmUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAgIGh0dHBzOi8vKi55b3V0dWJlLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgICBodHRwczovL3lvdXR1YmUuY29tLyoKCi8vIEB2ZXJzaW9uICAgICAgICAzLjUuMQovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKLyoKdmFyIGNvbnNvbGUgPSB7CiAgX2RlZmluZWQ6IGZhbHNlLAogIGxvZzogZnVuY3Rpb24ob2JqZWN0KSB7CiAgICBpZiAoIWNvbnNvbGUuX2RlZmluZWQpIHsKICAgICAgY29uc29sZS5fZGVmaW5lZCA9IHRydWU7CiAgICAgIGxvY2F0aW9uLmhyZWYgPSAiamF2YXNjcmlwdDoiICsgdW5ldmFsKGZ1bmN0aW9uKCkgewogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNvbnNvbGVEYXRhIiwKICAgICAgICBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkodGhpcywgZXZlbnQuZ2V0RGF0YSgib2JqZWN0IikpOwogICAgICAgIH0sCiAgICAgICAgZmFsc2UpOwogICAgICB9KSArICIoKSI7CiAgICB9CiAgICBzZXRUaW1lb3V0KHNlbmQsIDEwMCwgYXJndW1lbnRzKTsKICAgIGZ1bmN0aW9uIHNlbmQob2JqZWN0KSB7CiAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJEYXRhQ29udGFpbmVyRXZlbnQiKTsKICAgICAgZXZlbnQuaW5pdEV2ZW50KCJjb25zb2xlRGF0YSIsIHRydWUsIGZhbHNlKTsKICAgICAgZXZlbnQuc2V0RGF0YSgib2JqZWN0Iiwgb2JqZWN0KTsKICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9CiAgfQp9OwoqLwoKdmFyIHcgPSAodHlwZW9mKHVuc2FmZVdpbmRvdykgIT0gJ3VuZGVmaW5lZCcpID8gdW5zYWZlV2luZG93IDogd2luZG93Owp2YXIgZCA9IHcuZG9jdW1lbnQ7CnZhciBsID0gdy5sb2NhdGlvbjsKCi8qKgogKiBZb3VUdWJlIEhEIFN1aXRlIENsYXNzCiAqLwp2YXIgSGRTdWl0ZSA9IGZ1bmN0aW9uICgpIHsKCiAgICB2YXIgcyA9IHt9OwogICAgCiAgICB0aGlzLiQgPSBmdW5jdGlvbiggaWQgKSB7CiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgIH0KCiAgICAvKioKICAgICAqIFlvdVR1YmUgSEQgU3VpdGUgdmVyc2lvbgogICAgICovCiAgICB0aGlzLnZlcnNpb24gPSB7IHRleHQ6JzMuNS4xJywgcmV2OjIwMTEwODE0MTUwMCB9OwoKICAgIC8qKgogICAgICogQXV0byB2ZXJzaW9uIGNoZWNrCiAgICAgKi8KICAgIHRoaXMuY2hlY2tWZXJzaW9uQ2FsbGJhY2sgPSBmdW5jdGlvbigganNvbiApIHsKICAgICAgICAvL2NvbnNvbGUubG9nKGpzb24pOwogICAgICAgIHRoaXMuYWRkQ29va2llKCdoZHN1aXRlX2xhc3RfdXBkYXRlX3JldicsanNvbi5yZXYpOwoKICAgICAgICBpZiAoIGpzb24ucmV2ID4gdGhpcy52ZXJzaW9uLnJldiApIHsKICAgICAgICAgICAgdmFyIGEgPSB0aGlzLiQoJ2hkc3VpdGVfdXBkYXRlX2J1dHRvbicpOwogICAgICAgICAgICBhLmhyZWYgPSAnaHR0cDovL3VzZXJzY3JpcHRzLm9yZy9zY3JpcHRzL3NvdXJjZS8zOTE2Ny51c2VyLmpzJzsKICAgICAgICAgICAgYS50aXRsZSA9ICdVcGRhdGUgbm93ISc7CiAgICAgICAgICAgIGEuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJy0yMHB4IDAnOwogICAgICAgICAgICAKICAgICAgICAgICAgYWxlcnQoIk5ldyBZb3VUdWJlIEhEIFN1aXRlICIranNvbi50ZXh0KyIgaXMgbm93IGF2YWlsYWJsZSFcbkNsaWNrIHRoZSBidXR0b20gb2YgcmlnaHQgc2lkZSwgVXBkYXRlIG5vdyEiKTsKICAgICAgICB9CiAgICB9OwoKICAgIC8qKgogICAgICogWW91VHViZSBBbGwgRm9ybWF0CiAgICAgKi8KICAgIHRoaXMuZm9ybWF0cyA9IFsKICAgICAgICBbMCwge2lkOjM4LCBpY29uOidPcmcnLCAgIHR5cGU6J21wNCcsICBkZXNjOidmbXQ9MzggKCBPcmlnaW5hbCwgTVA0ICknLCBjb2xvcjoiMDAwIixjaGVjazoxfV0sCiAgICAgICAgWzEsIHtpZDozNywgaWNvbjonMTA4MHAnLCB0eXBlOidtcDQnLCAgZGVzYzonZm10PTM3ICggSEQxMDgwcCwgTVA0ICknLCAgY29sb3I6IkMwQyIsY2hlY2s6MX1dLAogICAgICAgIFsyLCB7aWQ6NDUsIGljb246JzcyMHAnLCAgdHlwZTonV2ViTScsIGRlc2M6J2ZtdD00NSAoIEhENzIwcCwgV2ViTSApJywgIGNvbG9yOiJGMDAiLGNoZWNrOjF9XSwKICAgICAgICBbMywge2lkOjIyLCBpY29uOic3MjBwJywgIHR5cGU6J21wNCcsICBkZXNjOidmbXQ9MjIgKCBIRDcyMHAsIE1QNCApJywgICBjb2xvcjoiRjAwIixjaGVjazoxfV0sCiAgICAgICAgWzQsIHtpZDo0NCwgaWNvbjonNDgwcCcsICB0eXBlOidXZWJNJywgZGVzYzonZm10PTQ0ICggU0Q0ODBwLCBXZWJNICknLCAgY29sb3I6IjBDMCIsY2hlY2s6MX1dLAogICAgICAgIFs1LCB7aWQ6MzUsIGljb246JzQ4MHAnLCAgdHlwZTonZmx2JywgIGRlc2M6J2ZtdD0zNSAoIFNENDgwcCwgRkxWICknLCAgIGNvbG9yOiIwQzAiLGNoZWNrOjF9XSwKICAgICAgICBbNiwge2lkOjQzLCBpY29uOiczNjBwJywgIHR5cGU6J1dlYk0nLCBkZXNjOidmbXQ9NDMgKCBTRDM2MHAsIFdlYk0gKScsICBjb2xvcjoiMDBGIixjaGVjazoxfV0sCiAgICAgICAgWzcsIHtpZDozNCwgaWNvbjonMzYwcCcsICB0eXBlOidmbHYnLCAgZGVzYzonZm10PTM0ICggU0QzNjBwLCBGTFYgKScsICAgY29sb3I6IjAwRiIsY2hlY2s6MX1dLAogICAgICAgIFs4LCB7aWQ6MTgsIGljb246J2lQb2QnLCAgdHlwZTonbXA0JywgIGRlc2M6J2ZtdD0xOCAoIGlQb2QsIE1QNCApJywgICAgIGNvbG9yOiI2NjYiLGNoZWNrOjF9XSwKICAgICAgICBbOSwge2lkOiA1LCBpY29uOicyNDBwJywgIHR5cGU6J2ZsdicsICBkZXNjOidmbXQ9NSAgKCBPbGRMUSwgRkxWICknLCAgICBjb2xvcjoiOTk5IixjaGVjazoxfV0KICAgICAgICAvL1s3LCB7aWQ6MTcsIGljb246J01PQicsICBkZXNjOidmbXQ9MTcgKCBIbW9iaWxlLzNHUC9NUEVHNC9BQUMgKScsICBjb2xvcjoiOTk5IixjaGVjazowfV0sCiAgICAgICAgLy9bOCwge2lkOjEzLCBpY29uOidNT0InLCAgZGVzYzonZm10PTEzICggTG1vYmlsZS8zR1AvSC4yNjMvQU1SICknLCAgY29sb3I6Ijk5OSIsY2hlY2s6MH1dCiAgICAgICAgLy9bNSwge2lkOiA2LCBpY29uOidPTEQnLGRlc2M6J2ZtdD02ICAoIE9sZEhRICAvRkxWL0guMjYzL01QMyApJyxjb2xvcjoiOTk5IixjaGVjazoxfV0sCiAgICBdOwogICAgdGhpcy5nZXRGb3JtYXQgPSBmdW5jdGlvbihpZCkgewogICAgICAgIGZvciAoIHZhciBpPTA7IGk8dGhpcy5mb3JtYXRzLmxlbmd0aDsgaSsrICkgewogICAgICAgICAgICBpZiAoIHRoaXMuZm9ybWF0c1tpXVsxXVsnaWQnXSA9PSBpZCApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdHNbaV1bMV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwoKICAgIC8qKgogICAgICogRnVuY3Rpb24gYWRkIGNvb2tpZQogICAgICovCiAgICB0aGlzLmFkZENvb2tpZSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAgICBpZiAoICFrZXkgKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgZG9jdW1lbnQuY29va2llCiAgICAgICAgICAgID0ga2V5ICsgJz0nICsgZXNjYXBlKHZhbHVlKSArICc7ICcKICAgICAgICAgICAgKyAnZXhwaXJlcz1UdWUsIDEtSmFuLTIwMzAgMDA6MDA6MDAgR01UOyAnCiAgICAgICAgICAgICsgJ3BhdGg9LzsgJzsKICAgIH07CgogICAgLyoqCiAgICAgKiBHZXQgY29va2llCiAgICAgKi8KICAgIHRoaXMuZ2V0Q29va2llID0gZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTsKICAgICAgICBmb3IgKCB2YXIgaT0wOyBpPGNvb2tpZXMubGVuZ3RoOyBpKysgKSB7CiAgICAgICAgICAgIGlmICggY29va2llc1tpXS5pbmRleE9mKCc9JykgPCAwICkgY29udGludWU7CiAgICAgICAgICAgIGtleV92YWx1ZSAgPSBjb29raWVzW2ldLnJlcGxhY2UoLyheW1xzXSt8OykvZywnJyk7CiAgICAgICAgICAgIGRlbGlfaW5kZXggPSBrZXlfdmFsdWUuaW5kZXhPZignPScpOwogICAgICAgICAgICBpZiAoIGtleV92YWx1ZS5zdWJzdHJpbmcoMCxkZWxpX2luZGV4KSA9PSBrZXkgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdW5lc2NhcGUoa2V5X3ZhbHVlLnN1YnN0cmluZyhkZWxpX2luZGV4KzEsa2V5X3ZhbHVlLmxlbmd0aCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAnJzsKICAgIH07CgogICAgLyoqCiAgICAgKiBUZXh0IFN0eWxlcwogICAgICovCiAgICAgdGhpcy50eCA9IHsKICAgICAgICBtb25vOgogICAgICAgICAgICAgJ2Rpc3BsYXk6YmxvY2s7Zm9udDoxNHB4LzE0cHggXCfjg5Ljg6njgq7jg47op5LjgrQgUHJvIFczXCcsXCdIaXJhZ2lubyBLYWt1IEdvdGhpYyBQcm9cJyxcJ+ODoeOCpOODquOCqlwnLE1laXJ5byxzYW5zLXNlcmlmO3doaXRlLXNwYWNlOnByZTtwYWRkaW5nOjVweDsnCiAgICAgICAgICAgICsnY29sb3I6I0NDQztib3JkZXI6MXB4IHNvbGlkICNDQ0M7Ym9yZGVyLWJvdHRvbTo1cHggc29saWQgI0NDQzstbW96LWJvcmRlci1yYWRpdXM6NXB4IDVweCAwIDA7LXdlYmtpdC1ib3JkZXItcmFkaXVzOjVweCA1cHggMCAwOycsCiAgICAgICAgZGw6CiAgICAgICAgICAgICAnZGlzcGxheTpibG9jaztmb250OjE0cHgvMTRweCBcJ+ODkuODqeOCruODjuinkuOCtCBQcm8gVzNcJyxcJ0hpcmFnaW5vIEtha3UgR290aGljIFByb1wnLFwn44Oh44Kk44Oq44KqXCcsTWVpcnlvLHNhbnMtc2VyaWY7d2hpdGUtc3BhY2U6cHJlO3BhZGRpbmc6NXB4OycKICAgICAgICAgICAgKydjb2xvcjojMDAwO2JhY2tncm91bmQ6I0ZGRjtib3JkZXI6MXB4IHNvbGlkICNDQ0M7LW1vei1ib3JkZXItcmFkaXVzOjVweCA1cHggMCAwOy13ZWJraXQtYm9yZGVyLXJhZGl1czo1cHggNXB4IDAgMDsnLAogICAgICAgIHByZToKICAgICAgICAgICAgICdkaXNwbGF5OmJsb2NrO2ZvbnQ6MTJweC8xMnB4IFwn44OS44Op44Ku44OO6KeS44K0IFBybyBXM1wnLFwnSGlyYWdpbm8gS2FrdSBHb3RoaWMgUHJvXCcsXCfjg6HjgqTjg6rjgqpcJyxNZWlyeW8sc2Fucy1zZXJpZjt3aGl0ZS1zcGFjZTpwcmU7cGFkZGluZzozcHg7JwogICAgIH07CgogICAgLyoqCiAgICAgKiBDb25maWdzCiAgICAgKi8KICAgIHRoaXMuY29uZmlnID0gewogICAgICAgIC8vIGRlZmF1bHQgc2V0dGluZ3MKICAgICAgICByZWRpcmVjdDogMSwgICAgICAgICAgIC8vIERvIHJlZGlyZWN0IHRvIGhpZ2hlc3QgZm9ybWF0IHBhZ2UKICAgICAgICAvL3Nob3dfaGlnaGVzdF9saW5rOiAxLAogICAgICAgIC8vc2hvd19oaWdoZXN0X2VtYmVkOiAxLAogICAgICAgIHZpc3VhbGl6ZTogIDEsICAgICAgICAgLy8gRG8gY2hlY2sgZm9ybWF0IG9mIGxpc3RlZCB2aWRlb3MKICAgICAgICBkb3dubG9hZF9mb3JtYXRzOiB7CiAgICAgICAgICAgIDM4OiAwLAogICAgICAgICAgICAzNzogMSwKICAgICAgICAgICAgNDU6IDEsCiAgICAgICAgICAgIDIyOiAxLAogICAgICAgICAgICA0NDogMSwKICAgICAgICAgICAgMzU6IDEsCiAgICAgICAgICAgIDQzOiAxLAogICAgICAgICAgICAzNDogMSwKICAgICAgICAgICAgMTg6IDEsCiAgICAgICAgICAgICA1OiAwCiAgICAgICAgfSwKICAgICAgICBkb3dubG9hZF9maWxlX25hbWU6ICd7JHRpdGxlfS57JG1vZGV9JwogICAgfTsKCiAgICAvKioKICAgICAqIFNldCBDb25maWcgdG8gY29va2llCiAgICAgKi8KICAgIHRoaXMuc2V0Q29uZmlnID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGNvbmZpZwogICAgICAgICAgICA9ICd7JwogICAgICAgICAgICArICdyZWRpcmVjdDonKyh0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX3JlZGlyZWN0JykuY2hlY2tlZD8xOjApKycsJwogICAgICAgICAgICAvLysgJ3Nob3dfaGlnaGVzdF9saW5rOicrKHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfc2hvd2xpbmsnKS5jaGVja2VkPzE6MCkrJywnCiAgICAgICAgICAgIC8vKyAnc2hvd19oaWdoZXN0X2VtYmVkOicrKHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfc2hvd2VtYmVkJykuY2hlY2tlZD8xOjApKycsJwogICAgICAgICAgICArICd2aXN1YWxpemU6JysodGhpcy4kKCdoZHN1aXRlX2NvbmZpZ192aXN1YWxpemUnKS5jaGVja2VkPzE6MCkrJywnCiAgICAgICAgICAgICsgJ2Rvd25sb2FkX2Zvcm1hdHM6IHsnCiAgICAgICAgICAgICsgICAnMzg6JysodGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDM4JykgJiYgdGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDM4JykuY2hlY2tlZD8xOjApKycsJwogICAgICAgICAgICArICAgJzM3OicrKHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfZGwzNycpICYmIHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfZGwzNycpLmNoZWNrZWQ/MTowKSsnLCcKICAgICAgICAgICAgKyAgICc0NTonKyh0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsNDUnKSAmJiB0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsNDUnKS5jaGVja2VkPzE6MCkrJywnCiAgICAgICAgICAgICsgICAnMjI6JysodGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDIyJykgJiYgdGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDIyJykuY2hlY2tlZD8xOjApKycsJwogICAgICAgICAgICArICAgJzQ0OicrKHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfZGw0NCcpICYmIHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfZGw0NCcpLmNoZWNrZWQ/MTowKSsnLCcKICAgICAgICAgICAgKyAgICczNTonKyh0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMzUnKSAmJiB0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMzUnKS5jaGVja2VkPzE6MCkrJywnCiAgICAgICAgICAgICsgICAnNDM6JysodGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDQzJykgJiYgdGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDQzJykuY2hlY2tlZD8xOjApKycsJwogICAgICAgICAgICArICAgJzM0OicrKHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfZGwzNCcpICYmIHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfZGwzNCcpLmNoZWNrZWQ/MTowKSsnLCcKICAgICAgICAgICAgKyAgICcxODonKyh0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMTgnKSAmJiB0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMTgnKS5jaGVja2VkPzE6MCkrJywnCiAgICAgICAgICAgICsgICAgJzU6JysodGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDUnKSAgJiYgdGhpcy4kKCdoZHN1aXRlX2NvbmZpZ19kbDUnKS5jaGVja2VkPzE6MCkgKycnCiAgICAgICAgICAgIC8vKyAgICcxNzonKyh0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMTcnKSAmJiB0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMTcnKS5jaGVja2VkPzE6MCkrJywnCiAgICAgICAgICAgIC8vKyAgICcxMzonKyh0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMTMnKSAmJiB0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX2RsMTMnKS5jaGVja2VkPzE6MCkrJycKICAgICAgICAgICAgKyAgICd9LCcKICAgICAgICAgICAgKyAgICdkb3dubG9hZF9maWxlX25hbWU6ICInK3RoaXMuJCgnaGRzdWl0ZV9jb25maWdfZmlsZV9uYW1lJykudmFsdWUrJyInCiAgICAgICAgICAgICsgJ30nOwoKICAgICAgICB0aGlzLmFkZENvb2tpZSgnaGRzdWl0ZV9jb25maWcnLCBjb25maWcpOwogICAgICAgIGFsZXJ0KCJTYXZlZCFcbkFmdGVyIHJlbG9hZGluZyB0aGUgcGFnZSwgdGhlIHNldHRpbmcgd2lsbCBiZWNvbWUgZWZmZWN0aXZlLiIpOwogICAgICAgIHRoaXMuY2xvc2VDb25maWcoKTsKICAgIH07CiAgICAvKioKICAgICAqIEdldCBDb25maWcgZnJvbSBjb29raWUKICAgICAqLwogICAgdGhpcy5nZXRDb25maWcgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5nZXRDb29raWUoJ2hkc3VpdGVfY29uZmlnJyk7CiAgICAgICAgaWYgKCBjb25maWcgKSB7CiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gZXZhbCgnKCcrY29uZmlnKycpJyk7CiAgICAgICAgfQogICAgfTsKICAgIC8qKgogICAgICogCiAgICAgKi8KICAgIHRoaXMub3BlbkNvbmZpZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuJCgnaGRzdWl0ZV9jb25maWdfcGFuZWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB0aGlzLiQoJ2hkc3VpdGVfc3dpdGNoJykuaHJlZiAgPSAnamF2YXNjcmlwdDpoZHN1aXRlLmNsb3NlQ29uZmlnKCk7JzsKICAgICAgICB0aGlzLiQoJ2hkc3VpdGVfc3dpdGNoJykudGl0bGUgPSAnQ2xvc2UgY29uZmlnIHBhbmVsLic7CiAgICAgICAgdGhpcy4kKCdoZHN1aXRlX3N3aXRjaCcpLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICctMjBweCAtMTAwcHgnOwogICAgfTsKICAgIC8qKgogICAgICogCiAgICAgKi8KICAgIHRoaXMuY2xvc2VDb25maWcgPSBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLiQoJ2hkc3VpdGVfY29uZmlnX3BhbmVsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0aGlzLiQoJ2hkc3VpdGVfc3dpdGNoJykuaHJlZiAgPSAnamF2YXNjcmlwdDpoZHN1aXRlLm9wZW5Db25maWcoKTsnOwogICAgICAgIHRoaXMuJCgnaGRzdWl0ZV9zd2l0Y2gnKS50aXRsZSA9ICdPcGVuIGNvbmZpZyBwYW5lbC4nOwogICAgICAgIHRoaXMuJCgnaGRzdWl0ZV9zd2l0Y2gnKS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAnMCAtMTAwcHgnOwogICAgfTsKICAgIC8qKgogICAgICogY3JlYXRlIE1lbnUKICAgICAqLwogICAgdGhpcy5jcmVhdGVNZW51ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgLyogdXBkYXRlIGJ1dHRvbiAqLwogICAgICAgIHZhciBhID0gZC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5pZCAgID0gJ2hkc3VpdGVfdXBkYXRlX2J1dHRvbic7CiAgICAgICAgYS5ocmVmID0gJ2phdmFzY3JpcHQ6aGRzdWl0ZS5jaGVja1ZlcnNpb24odHJ1ZSk7JzsKICAgICAgICBhLnRpdGxlID0gJ0NoZWNrIHZlcnNpb24uJzsKICAgICAgICBhLnN0eWxlLmRpc3BsYXkgID0gJ2Jsb2NrJzsKICAgICAgICBhLnN0eWxlLndpZHRoICAgID0gJzIwcHgnOwogICAgICAgIGEuc3R5bGUuaGVpZ2h0ICAgPSAnMjBweCc7CiAgICAgICAgYS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwogICAgICAgIGEuc3R5bGUuekluZGV4ICAgPSAnOTk5JzsKICAgICAgICBhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICBhLnN0eWxlLnRvcCAgICAgID0gJzEwMHB4JzsKICAgICAgICBhLnN0eWxlLnJpZ2h0ICAgID0gJzAnOwogICAgICAgIGEuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoJyt0aGlzLnNwcml0ZSsnKSBuby1yZXBlYXQgc2Nyb2xsIDAgMCc7CiAgICAgICAgZC5ib2R5LmFwcGVuZENoaWxkKGEpOwoKICAgICAgICAvKiB2aXN1YWxpemUgYnV0dG9uICovCiAgICAgICAgYSA9IGQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEuaHJlZiA9ICdqYXZhc2NyaXB0Omhkc3VpdGUudmlzdWFsaXplKCk7JzsKICAgICAgICBhLnRpdGxlID0gJ0NoZWNrIGZvcm1hdHMgYWdhaW4hJzsKICAgICAgICBhLnNldEF0dHJpYnV0ZSgnb25tb3VzZW92ZXInLCd0aGlzLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbj1cJy0yMHB4IC0yMHB4XCc7Jyk7CiAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ29ubW91c2VvdXQnLCd0aGlzLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbj1cJzAgLTIwcHhcJzsnKTsKICAgICAgICBhLnN0eWxlLmRpc3BsYXkgID0gJ2Jsb2NrJzsKICAgICAgICBhLnN0eWxlLndpZHRoICAgID0gJzIwcHgnOwogICAgICAgIGEuc3R5bGUuaGVpZ2h0ICAgPSAnMjBweCc7CiAgICAgICAgYS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwogICAgICAgIGEuc3R5bGUuekluZGV4ICAgPSAnOTk5JzsKICAgICAgICBhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICBhLnN0eWxlLnRvcCAgICAgID0gJzEyMHB4JzsKICAgICAgICBhLnN0eWxlLnJpZ2h0ICAgID0gJzAnOwogICAgICAgIGEuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoJyt0aGlzLnNwcml0ZSsnKSBuby1yZXBlYXQgc2Nyb2xsIDAgLTIwcHgnOwogICAgICAgIGQuYm9keS5hcHBlbmRDaGlsZChhKTsKCiAgICAgICAgLyogaWNvbiAqLwogICAgICAgIGEgPSBkLmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhLmlkICAgPSAnaGRzdWl0ZV9sb2dvJzsKICAgICAgICBhLmhyZWYgPSAnaHR0cDovL3VzZXJzY3JpcHRzLm9yZy9zY3JpcHRzL3Nob3cvMzkxNjcnOwogICAgICAgIGEudGl0bGUgPSAnR28gdG8gdXNlcnNjcmlwdHMub3JnIHBhZ2UuJzsKICAgICAgICBhLnNldEF0dHJpYnV0ZSgnb25tb3VzZW92ZXInLCd0aGlzLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbj1cJy0yMHB4IC00MHB4XCc7Jyk7CiAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ29ubW91c2VvdXQnLCd0aGlzLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbj1cJzAgLTQwcHhcJzsnKTsKICAgICAgICBhLnN0eWxlLmRpc3BsYXkgID0gJ2Jsb2NrJzsKICAgICAgICBhLnN0eWxlLndpZHRoICAgID0gJzIwcHgnOwogICAgICAgIGEuc3R5bGUuaGVpZ2h0ICAgPSAnNjBweCc7CiAgICAgICAgYS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwogICAgICAgIGEuc3R5bGUuekluZGV4ICAgPSAnOTk5JzsKICAgICAgICBhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICBhLnN0eWxlLnRvcCAgICAgID0gJzE0MHB4JzsKICAgICAgICBhLnN0eWxlLnJpZ2h0ICAgID0gJzAnOwogICAgICAgIGEuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoJyt0aGlzLnNwcml0ZSsnKSBuby1yZXBlYXQgc2Nyb2xsIDAgLTQwcHgnOwogICAgICAgIGQuYm9keS5hcHBlbmRDaGlsZChhKTsKCiAgICAgICAgLyogb3BlbiBidXR0b24gKi8KICAgICAgICBhID0gZC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5pZCAgID0gJ2hkc3VpdGVfc3dpdGNoJzsKICAgICAgICBhLmhyZWYgPSAnamF2YXNjcmlwdDpoZHN1aXRlLm9wZW5Db25maWcoKTsnOwogICAgICAgIGEudGl0bGUgPSAnT3BlbiBjb25maWdyYXRpb24gcGFuZWwuJzsKICAgICAgICBhLnN0eWxlLmRpc3BsYXkgID0gJ2Jsb2NrJzsKICAgICAgICBhLnN0eWxlLndpZHRoICAgID0gJzIwcHgnOwogICAgICAgIGEuc3R5bGUuaGVpZ2h0ICAgPSAnMjBweCc7CiAgICAgICAgYS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwogICAgICAgIGEuc3R5bGUuekluZGV4ICAgPSAnOTk5JzsKICAgICAgICBhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICBhLnN0eWxlLnRvcCAgICAgID0gJzIwMHB4JzsKICAgICAgICBhLnN0eWxlLnJpZ2h0ICAgID0gJzAnOwogICAgICAgIGEuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoJyt0aGlzLnNwcml0ZSsnKSBuby1yZXBlYXQgc2Nyb2xsIDAgLTEwMHB4JzsKICAgICAgICBkLmJvZHkuYXBwZW5kQ2hpbGQoYSk7CgogICAgICAgIC8qIENvbmZpZ3JhdGlvbiBwYW5lbCAqLwogICAgICAgIHZhciBkaXYgPSBkLmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGRpdi5pZCAgID0gJ2hkc3VpdGVfY29uZmlnX3BhbmVsJzsKICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSAgID0gJ25vbmUnOwogICAgICAgIGRpdi5zdHlsZS53aWR0aCAgICAgPSAnNDAwcHgnOwogICAgICAgIGRpdi5zdHlsZS56SW5kZXggICAgPSAnOTk4JzsKICAgICAgICBkaXYuc3R5bGUucG9zaXRpb24gID0gJ2ZpeGVkJzsKICAgICAgICBkaXYuc3R5bGUudG9wICAgICAgID0gJzIwcHgnOwogICAgICAgIGRpdi5zdHlsZS5yaWdodCAgICAgPSAnMCc7CiAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmQgPSAnI0VFRSc7CiAgICAgICAgZGl2LnN0eWxlLmJvcmRlclRvcCAgICAgICA9ICczcHggc29saWQgIzk5OSc7CiAgICAgICAgZGl2LnN0eWxlLmJvcmRlckJvdHRvbSAgICA9ICczcHggc29saWQgIzk5OSc7CiAgICAgICAgZGl2LnN0eWxlLmJvcmRlckxlZnQgICAgICA9ICczcHggc29saWQgIzk5OSc7CiAgICAgICAgZGl2LnN0eWxlLk1vekJvcmRlclJhZGl1c1RvcGxlZnQgICAgICAgPSAnMTBweCc7CiAgICAgICAgZGl2LnN0eWxlLk1vekJvcmRlclJhZGl1c0JvdHRvbWxlZnQgICAgPSAnMTBweCc7CiAgICAgICAgZGl2LnN0eWxlLldlYmtpdEJvcmRlclRvcExlZnRSYWRpdXMgICAgPSAnMTBweCc7CiAgICAgICAgZGl2LnN0eWxlLldlYmtpdEJvcmRlckJvdHRvbUxlZnRSYWRpdXMgPSAnMTBweCc7CiAgICAgICAgZGl2LmlubmVySFRNTAogICAgICAgICAgICA9ICc8Zm9ybSBpZD0iaGRzdWl0ZV9mb3JtIiBuYW1lPSJoZHN1aXRlX2Zvcm0iIG9uc3VibWl0PSJyZXR1cm4gZmFsc2U7IiBzdHlsZT0ibWFyZ2luOjEwcHg7cGFkZGluZzowOyI+JwogICAgICAgICAgICArICc8aDMgc3R5bGU9InBhZGRpbmc6NXB4O2JhY2tncm91bmQ6I0NDQztib3JkZXI6MXB4IHNvbGlkICM5OTk7LW1vei1ib3JkZXItcmFkaXVzOjVweDstd2Via2l0LWJvcmRlci1yYWRpdXM6NXB4OyI+Q29uZmlnIFBhbmVsPC9oMz4nCiAgICAgICAgICAgICsgJzxoND5MaXN0IFBhZ2U8L2g0PicKICAgICAgICAgICAgKyAnPHVsIHN0eWxlPSJtYXJnaW46MCAwIDAgMTVweDsiPicKICAgICAgICAgICAgKyAnPGxpPjxpbnB1dCBpZD0iaGRzdWl0ZV9jb25maWdfdmlzdWFsaXplIiBuYW1lPSJoZHN1aXRlX2NvbmZpZ192aXN1YWxpemUiIHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iMSIgJwogICAgICAgICAgICArICh0aGlzLmNvbmZpZy52aXN1YWxpemU/J2NoZWNrZWQ9ImNoZWNrZWQiICc6JycpCiAgICAgICAgICAgICsgJy8+JwogICAgICAgICAgICArICcgU2hvdyBpY29ucyB0aGF0IGNoZWNrZWQgdGhlIGhpZ2hlc3QgcXVhbGl0eSBmb3JtYXQ8L2xpPicKICAgICAgICAgICAgKyAnPC91bD4nCiAgICAgICAgICAgICsgJzxoND5XYXRjaCBQYWdlPC9oND4nCiAgICAgICAgICAgICsgJzx1bCBzdHlsZT0ibWFyZ2luOjAgMCAwIDE1cHg7Ij4nCiAgICAgICAgICAgICsgJzxsaT48aW5wdXQgaWQ9Imhkc3VpdGVfY29uZmlnX3JlZGlyZWN0IiBuYW1lPSJoZHN1aXRlX2NvbmZpZ19yZWRpcmVjdCIgdHlwZT0iY2hlY2tib3giIHZhbHVlPSIxIiAnCiAgICAgICAgICAgICsgKHRoaXMuY29uZmlnLnJlZGlyZWN0PydjaGVja2VkPSJjaGVja2VkIiAnOicnKQogICAgICAgICAgICArICcvPiBBbHdheXMgd2F0Y2ggaW4gaGlnaGVzdCBxdWFsaXR5IGZvcm1hdDwvbGk+JwogICAgICAgICAgICAvLyBjb21tZW50IG91dCBzaG93IGxpbmsgc2V0dGluZwogICAgICAgICAgICAvKgogICAgICAgICAgICArICc8bGk+PGlucHV0IGlkPSJoZHN1aXRlX2NvbmZpZ19zaG93bGluayIgbmFtZT0iaGRzdWl0ZV9jb25maWdfc2hvd2xpbmsiIHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iMSIgJwogICAgICAgICAgICArICh0aGlzLmNvbmZpZy5zaG93X2hpZ2hlc3RfbGluaz8nY2hlY2tlZD0iY2hlY2tlZCIgJzonJykKICAgICAgICAgICAgKyAnLz4gU2hvdyB0aGUgbGluayBpbiBoaWdoZXN0IHF1YWxpdHkgZm9ybWF0PC9saT4nCiAgICAgICAgICAgICovCiAgICAgICAgICAgIC8vIGNvbW1lbnQgb3V0IGVtYmVkIHNldHRpbmcKICAgICAgICAgICAgLyoKICAgICAgICAgICAgKyAgICAgJzxsaT48aW5wdXQgaWQ9Imhkc3VpdGVfY29uZmlnX3Nob3dlbWJlZCIgbmFtZT0iaGRzdWl0ZV9jb25maWdfc2hvd2VtYmVkIiB0eXBlPSJjaGVja2JveCIgdmFsdWU9IjEiICcKICAgICAgICAgICAgKyAgICAgKHRoaXMuY29uZmlnLnNob3dfaGlnaGVzdF9lbWJlZD8nY2hlY2tlZD0iY2hlY2tlZCIgJzonJykKICAgICAgICAgICAgKyAgICAgJy8+JwogICAgICAgICAgICArICAgICAnIFNob3cgdGhlIGVtYmVkIGNvZGUgaW4gaGlnaGVzdCBxdWFsaXR5IGZvcm1hdDwvbGk+JwogICAgICAgICAgICAqLwogICAgICAgICAgICArICc8L3VsPicKICAgICAgICAgICAgKyAnPGg0PkRvd25sb2FkIGZvcm1hdHM8L2g0PicKICAgICAgICAgICAgKyAnPHRhYmxlIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iNSIgaWQ9Imhkc3VpdGVfY29uZmlnX2Rvd25sb2FkcyIgc3R5bGU9Im1hcmdpbjowIDAgMCAxNXB4OyI+PC90YWJsZT4nCiAgICAgICAgICAgICsgJzxoND5Eb3dubG9hZCBmaWxlIG5hbWU8L2g0PicKICAgICAgICAgICAgKyAnPGlucHV0IGlkPSJoZHN1aXRlX2NvbmZpZ19maWxlX25hbWUiIG5hbWU9Imhkc3VpdGVfY29uZmlnX2ZpbGVfbmFtZSIgdHlwZT0idGV4dCIgdmFsdWU9IicrKHRoaXMuY29uZmlnLmZpbGVfbmFtZT90aGlzLmNvbmZpZy5maWxlX25hbWU6J3skdGl0bGV9LnskbW9kZX0nKSsnIiAvPicKICAgICAgICAgICAgKyAnPHAgc3R5bGU9InBhZGRpbmc6MTBweDt0ZXh0LWFsaWduOmNlbnRlcjsiPicKICAgICAgICAgICAgKyAnPGlucHV0IGlkPSJoZHN1aXRlX2NvbmZpZ19zdWJtaXQiIG5hbWU9Imhkc3VpdGVfY29uZmlnX3N1Ym1pdCIgdHlwZT0iYnV0dG9uIiB2YWx1ZT0iU2F2ZSIgb25jbGljaz0iaGRzdWl0ZS5zZXRDb25maWcoKTsiJwogICAgICAgICAgICArICcgc3R5bGU9Im1hcmdpbjowIGF1dG87Zm9udDoyMHB4LzIwcHggQXJpYWw7IiAvPicKICAgICAgICAgICAgKyAnPC9mb3JtPic7CiAgICAgICAgZC5ib2R5LmFwcGVuZENoaWxkKGRpdik7CiAgICAgICAgCiAgICAgICAgaHRtbCA9ICcnOwogICAgICAgIGZvciAoIHZhciBpPTA7IGk8dGhpcy5mb3JtYXRzLmxlbmd0aDsgaSsrICkgewogICAgICAgICAgICBjb25maWcgPSB0aGlzLmZvcm1hdHNbaV1bMV07CiAgICAgICAgICAgIGZtdCA9IDA7CiAgICAgICAgICAgIGZvciAoIHZhciBqIGluIHRoaXMuY29uZmlnLmRvd25sb2FkX2Zvcm1hdHMgKSB7CiAgICAgICAgICAgICAgICBpZiAoIGNvbmZpZy5pZCA9PSBqICkgewogICAgICAgICAgICAgICAgICAgIGZtdCA9IHRoaXMuY29uZmlnLmRvd25sb2FkX2Zvcm1hdHNbal07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaHRtbAogICAgICAgICAgICAgICAgKz0gJzx0cj4nCiAgICAgICAgICAgICAgICArICAnPHRkPjxpbnB1dCBpZD0iaGRzdWl0ZV9jb25maWdfZGwnK2NvbmZpZy5pZCsnIiBuYW1lPSJoZHN1aXRlX2NvbmZpZ19kbCcrY29uZmlnLmlkKyciIHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iMSIgJysoZm10PydjaGVja2VkPSJjaGVja2VkIiAnOicnKSsnLz48L3RkPicKICAgICAgICAgICAgICAgICsgICc8dGQ+PHNwYW4gc3R5bGU9ImNvbG9yOiNmZmY7Zm9udDpib2xkIDEwcHgvMTBweCBBcmlhbDtwYWRkaW5nOjFweCAycHg7Ym9yZGVyOjFweCBzb2xpZCAjJytjb25maWcuY29sb3IrJzstbW96LWJvcmRlci1yYWRpdXM6M3B4Oy13ZWJraXQtYm9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1jb2xvcjojJytjb25maWcuY29sb3IrJzsiPicrY29uZmlnLmljb24rJzwvc3Bhbj48L3RkPicKICAgICAgICAgICAgICAgICsgICc8dGQgc3R5bGU9IicrdGhpcy50eC5wcmUrJyI+Jytjb25maWcuZGVzYysnPC90ZD4nCiAgICAgICAgICAgICAgICArICAnPC90cj4nOwogICAgICAgIH0KICAgICAgICBkLmdldEVsZW1lbnRCeUlkKCdoZHN1aXRlX2NvbmZpZ19kb3dubG9hZHMnKS5pbm5lckhUTUwgPSBodG1sOwogICAgfTsKICAgIC8qKgogICAgICogY3JlYXRlIFhtbEh0dHBSZXF1ZXN0CiAgICAgKi8KICAgIHRoaXMuY3JlYXRlWEhSID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKCB3aW5kb3cuQWN0aXZlWE9iamVjdCApIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTXN4bWwyLlhNTEhUVFAiKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlMikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICggd2luZG93LlhNTEh0dHBSZXF1ZXN0ICkgewogICAgICAgICAgICByZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfTsKICAgIC8qKgogICAgICogQ29udmVydCBWaWRlbyBUaXRsZSBmb3IgRmlsZSBOYW1lCiAgICAgKi8KICAgIHRoaXMuY29udmVydFRpdGxlID0gZnVuY3Rpb24odm9iaixmb3JtYXQpIHsKICAgICAgICB2YXIgdGl0bGUgICAgPSB2b2JqWyd0aXRsZSddLnJlcGxhY2UoLyhcXHxcL3w6fFwqfFw/fFwifFx8KS9nLCdfJyk7CiAgICAgICAgdmFyIG1vZGUgICAgID0gZm9ybWF0WydpY29uJ107CiAgICAgICAgdmFyIHZpZGVvX2lkID0gdm9ialsndmlkZW9faWQnXTsKICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgIHZhciB5ID0gdG9kYXkuZ2V0WWVhcigpOwogICAgICAgIHZhciBtID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7CiAgICAgICAgdmFyIGQgPSB0b2RheS5nZXREYXRlKCk7CiAgICAgICAgaWYgKHkgPCAyMDAwKSB7IHkgKz0gMTkwMDsgfQogICAgICAgIGlmIChtIDwgMTApIHsgbSA9ICIwIiArIG07IH0KICAgICAgICBpZiAoZCA8IDEwKSB7IGQgPSAiMCIgKyBkOyB9CiAgICAgICAgdmFyIGggPSB0b2RheS5nZXRIb3VycygpOwogICAgICAgIHZhciBpID0gdG9kYXkuZ2V0TWludXRlcygpOwogICAgICAgIHZhciBzID0gdG9kYXkuZ2V0U2Vjb25kcygpOwogICAgICAgIHZhciBmaWxlX25hbWUgPSAoaGRzdWl0ZS5jb25maWcuZG93bmxvYWRfZmlsZV9uYW1lP2hkc3VpdGUuY29uZmlnLmRvd25sb2FkX2ZpbGVfbmFtZToneyR0aXRsZX0ueyRtb2RlfScpCiAgICAgICAgICAgIC5yZXBsYWNlKCd7JHRpdGxlfScsdGl0bGUpCiAgICAgICAgICAgIC5yZXBsYWNlKCd7JG1vZGV9Jyxtb2RlKQogICAgICAgICAgICAucmVwbGFjZSgneyR2aWRlb19pZH0nLHZpZGVvX2lkKQogICAgICAgICAgICAucmVwbGFjZSgneyR5fScseSkKICAgICAgICAgICAgLnJlcGxhY2UoJ3skbX0nLG0pCiAgICAgICAgICAgIC5yZXBsYWNlKCd7JGR9JyxkKQogICAgICAgICAgICAucmVwbGFjZSgneyRofScsaCkKICAgICAgICAgICAgLnJlcGxhY2UoJ3skaX0nLGkpCiAgICAgICAgICAgIC5yZXBsYWNlKCd7JHN9JyxzKTsKICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVfbmFtZSk7CiAgICB9OwogICAgLyoqCiAgICAgKiBQYXJzZSBmZXRjaGVkIEhUTUwgYW5kIG1ha2UgVmlkZW8gT2JqZWN0CiAgICAgKi8KICAgIHRoaXMuZ2V0VmlkZW9PYmplY3QgPSBmdW5jdGlvbiggaHRtbCApIHsKICAgICAgICB2YXIgdm9iaiA9IHt9OwogICAgICAgIGlmICggaHRtbC5tYXRjaCgvXCJ1cmxfZW5jb2RlZF9mbXRfc3RyZWFtX21hcFwiOlxzP1wiKC4rPylcIi8pICkgewogICAgICAgICAgICB2b2JqWydmb3JtYXRzJ10gPSBbXTsKICAgICAgICAgICAgZm9ybWF0cyA9IFJlZ0V4cC4kMS5zcGxpdCgnLCcpOwogICAgICAgICAgICBmb3IgKCB2YXIgaT0wOyBpPGZvcm1hdHMubGVuZ3RoOyBpKysgKSB7CiAgICAgICAgICAgICAgICB2b2JqWydmb3JtYXRzJ11baV0gPSB7fTsKICAgICAgICAgICAgICAgIGZvcm1hdF92YWxzID0gZm9ybWF0c1tpXS5zcGxpdCgnXFx1MDAyNicpOwogICAgICAgICAgICAgICAgZm9yICggdmFyIGo9MDsgajxmb3JtYXRfdmFscy5sZW5ndGg7IGorKyApIHsKICAgICAgICAgICAgICAgICAgICBrZXl2YWwgPSBmb3JtYXRfdmFsc1tqXS5zcGxpdCgnPScpOwogICAgICAgICAgICAgICAgICAgIHZvYmpbJ2Zvcm1hdHMnXVtpXVsga2V5dmFsWzBdIF0gPSBkZWNvZGVVUklDb21wb25lbnQoa2V5dmFsWzFdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIGh0bWwubWF0Y2goLzxtZXRhXHNuYW1lPVwidGl0bGVcIlxzY29udGVudD1cIiguKz8pXCIvKSApIHsKICAgICAgICAgICAgdm9ialsndGl0bGUnXSA9IFJlZ0V4cC4kMTsKICAgICAgICB9CiAgICAgICAgaWYgKCBodG1sLm1hdGNoKC9cInZpZGVvX2lkXCI6XHM/XCIoLis/KVwiLykgKSB7CiAgICAgICAgICAgIHZvYmpbJ3ZpZGVvX2lkJ10gPSBSZWdFeHAuJDE7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2b2JqOwogICAgfTsKICAgIC8qKgogICAgICogY2hlY2sgVVJMCiAgICAgKi8KICAgIHRoaXMuY2hlY2tVUkwgPSBmdW5jdGlvbih2aWRlb19pZCkgewogICAgICAgIHZhciB1cmwgPSAnJzsKICAgICAgICBpZiAoIHZpZGVvX2lkLm1hdGNoKC8uKz09JC8pICkgewogICAgICAgICAgICB1cmwgPSAnaHR0cDovLycrbG9jYXRpb24uaG9zdCsnL2N0aHJ1P2tleT0nK3ZpZGVvX2lkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVybCA9ICdodHRwOi8vJytsb2NhdGlvbi5ob3N0Kycvd2F0Y2g/dj0nK3ZpZGVvX2lkOwogICAgICAgIH0KICAgICAgICB2YXIgWEhSID0gdGhpcy5jcmVhdGVYSFIoKTsKICAgICAgICBYSFIub3BlbiggJ0dFVCcsIHVybCwgdHJ1ZSApOwogICAgICAgIFhIUi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKCBYSFIucmVhZHlTdGF0ZT09NCApIHsKICAgICAgICAgICAgICAgIHZhciB2b2JqID0gaGRzdWl0ZS5nZXRWaWRlb09iamVjdChYSFIucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIHZhciBzdHJvbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3Ryb25nJyk7CiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaT0wOyBpPHN0cm9uZy5sZW5ndGg7IGkrKyApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoICFzdHJvbmdbaV0uaW5uZXJIVE1MICYmIHN0cm9uZ1tpXS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT0gdm9ialsndmlkZW9faWQnXSApIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuc3R5bGUuY29sb3IgICA9ICcjZmZmJzsKICAgICAgICAgICAgICAgICAgICAgICAgbGluay5zdHlsZS5mb250ICAgID0gJ2JvbGQgMTBweC8xIEFyaWFsJzsKICAgICAgICAgICAgICAgICAgICAgICAgbGluay5zdHlsZS5wYWRkaW5nID0gJzFweCAycHgnOwogICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnb25tb3VzZW92ZXInLCJ0aGlzLnN0eWxlLmZvbnRTaXplPScyMHB4JyIpOwogICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnb25tb3VzZW91dCcgLCJ0aGlzLnN0eWxlLmZvbnRTaXplPScxMHB4JyIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaj0wOyBqPHZvYmpbJ2Zvcm1hdHMnXS5sZW5ndGg7IGorKyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZtdCA9IGhkc3VpdGUuZ2V0Rm9ybWF0KCB2b2JqWydmb3JtYXRzJ11bal1bJ2l0YWcnXSApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGRzdWl0ZS5nZXRDb25maWcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaGRzdWl0ZS5jb25maWcuZG93bmxvYWRfZm9ybWF0c1sgdm9ialsnZm9ybWF0cyddW2pdWydpdGFnJ10gXSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnN0eWxlLmJvcmRlciAgICAgICAgICAgICA9ICcxcHggc29saWQgIycrZm10LmNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuc3R5bGUuTW96Qm9yZGVyUmFkaXVzICAgID0gJzNweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluay5zdHlsZS5XZWJraXRCb3JkZXJSYWRpdXMgPSAnM3B4JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnN0eWxlLmJhY2tncm91bmRDb2xvciAgICA9ICcjJytmbXQuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3RpdGxlJyx2b2JqWyd0aXRsZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLmhyZWYgICAgICA9IHZvYmpbJ2Zvcm1hdHMnXVtqXVsndXJsJ10rJyZ0aXRsZT0nK2hkc3VpdGUuY29udmVydFRpdGxlKHZvYmosZm10KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLmlubmVySFRNTCA9IGZtdC5pY29uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc3Ryb25nW2ldLm5leHRTaWJsaW5nLmhyZWYgJiYgIXN0cm9uZ1tpXS5uZXh0U2libGluZy5ocmVmLm1hdGNoKC8jJC8pICYmIGhkc3VpdGUuY29uZmlnLnJlZGlyZWN0ICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3N0cm9uZ1tpXS5uZXh0U2libGluZy5ocmVmICs9ICImZm10PSIrZm10LmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJvbmdbaV0ubmV4dFNpYmxpbmcuaHJlZiArPSAiJmhkPTEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzdHJvbmdbaV0uYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIFhIUi5zZW5kKCcnKTsKICAgIH07CiAgICAvKioKICAgICAqIEFkZCBIRCBvciBNUDQgb24gZWFjaCBsaW5rcyBpbiBZb3VUdWJlIExpc3QgUGFnZQogICAgICovCiAgICB0aGlzLnZpc3VhbGl6ZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICggIXRoaXMuY29uZmlnLnZpc3VhbGl6ZSApIHJldHVybiBmYWxzZTsKCiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpOwogICAgICAgIGZvciAoIHZhciBpPTA7IGk8YS5sZW5ndGg7IGkrKyApIHsKICAgICAgICAgICAgbWF0Y2ggPSAnJzsKICAgICAgICAgICAgaWYgKCBhW2ldLmdldEF0dHJpYnV0ZSgndmlkJykgKSAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIGNoZWNrZWQgTGluawogICAgICAgICAgICBpZiAoIGFbaV0uaW5uZXJIVE1MLm1hdGNoKC92aWRlby1sb2dvL2kpICkgICAgICAgICAgICAgY29udGludWU7IC8vIFNraXAgSEQgaWNvbgogICAgICAgICAgICBpZiAoIGFbaV0uZ2V0QXR0cmlidXRlKCdjbGFzcycpID09ICd5dC1idXR0b24nICkgICAgICAgY29udGludWU7IC8vIFNraXAgQnV0dG9uIExpbmsKICAgICAgICAgICAgaWYgKCBhW2ldLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpID09ICd2aWRlby10aW1lJyApIGNvbnRpbnVlOyAvLyBTa2lwIHRpbWUKICAgICAgICAgICAgLy8gVGh1bWJuYWlsIExpbmsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgYVtpXS5ocmVmLm1hdGNoKC93YXRjaFw/dj0oW2EtekEtWjAtOV8tXSopLykgfHwKICAgICAgICAgICAgICAgIGFbaV0uaHJlZi5tYXRjaCgvd2F0Y2hfdmlkZW9zLis/JnZpZGVvX2lkcz0oW2EtekEtWjAtOV8tXSopLykKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBhW2ldLnNldEF0dHJpYnV0ZSgndmlkJywyKTsKICAgICAgICAgICAgICAgIG1hdGNoID0gUmVnRXhwLiQxOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpbWdzID0gYVtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW1nJyk7CiAgICAgICAgICAgICAgICBpZiAoIGltZ3MubGVuZ3RoICYmIGltZ3NbMF0uZ2V0QXR0cmlidXRlKCdzcmMnKS5pbmRleE9mKCd5dGltZy5jb20nKSA+IC0xICApIHsKICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdmlkZW9faWQKICAgICAgICAgICAgICAgICAgICBpZiAoIGltZ3NbMF0uZ2V0QXR0cmlidXRlKCdzcmMnKSAmJiBpbWdzWzBdLmdldEF0dHJpYnV0ZSgnc3JjJykubWF0Y2goLy4rP1wvKFthLXpBLVowLTlfLV0qKVwvZGVmYXVsdFwuanBnJC8pICkgewogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IFJlZ0V4cC4kMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIGltZ3NbMF0uZ2V0QXR0cmlidXRlKCd0aHVtYicpICYmIGltZ3NbMF0uZ2V0QXR0cmlidXRlKCd0aHVtYicpLm1hdGNoKC8uKz9cLyhbYS16QS1aMC05Xy1dKilcL2RlZmF1bHRcLmpwZyQvKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBSZWdFeHAuJDE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmICggIWFbaV0ucGFyZW50Tm9kZS5zdHlsZS5wb3NpdGlvbiApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYVtpXS5wYXJlbnROb2RlLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc3Ryb25nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3Ryb25nJyk7CiAgICAgICAgICAgICAgICAgICAgc3Ryb25nLnNldEF0dHJpYnV0ZSgnY2xhc3MnLG1hdGNoKTsKICAgICAgICAgICAgICAgICAgICBzdHJvbmcuc2V0QXR0cmlidXRlKCd0aXRsZScsaW1nc1swXS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpOwogICAgICAgICAgICAgICAgICAgIHN0cm9uZy5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICAgICAgICAgICAgICAgc3Ryb25nLnN0eWxlLnpJbmRleCA9IDEwMDsKICAgICAgICAgICAgICAgICAgICBpZiAoIGFbaV0ucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgIT0gJ3Nwb25zLXZpZC10aHVtYicgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9uZy5zdHlsZS5sZWZ0ID0gIjAiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBhW2ldLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0cm9uZywgYVtpXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3Ryb25nJyk7CiAgICAgICAgCiAgICAgICAgdmFyIGMgPSAnJzsKICAgICAgICBmb3IgKCB2YXIgaT0wOyBpPHMubGVuZ3RoOyBpKysgKSB7CiAgICAgICAgICAgIGlmICggIXNbaV0uaW5uZXJIVE1MICYmIHNbaV0uZ2V0QXR0cmlidXRlKCdjbGFzcycpICYmIGMuaW5kZXhPZihzW2ldLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkgPCAwICkgewogICAgICAgICAgICAgICAgYyArPSAnICcgKyBzW2ldLmdldEF0dHJpYnV0ZSgnY2xhc3MnKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tVUkwoIHNbaV0uZ2V0QXR0cmlidXRlKCdjbGFzcycpICk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgLyoqCiAgICAgKiBjaGVjayBGb3JtYXQKICAgICAqLwogICAgdGhpcy5jaGVja0Zvcm1hdCA9IGZ1bmN0aW9uKGZtdCkgewogICAgICAgIHZhciBmb3JtYXQgPSB0aGlzLmdldEZvcm1hdChmbXQpOwogICAgICAgIC8vIExvY2FsIGNoZWNrCiAgICAgICAgZm9yICggdmFyIGk9MDsgaTxzWydmb3JtYXRzJ10ubGVuZ3RoOyBpKysgKSB7CiAgICAgICAgICAgIGlmICggc1snZm9ybWF0cyddW2ldWydpdGFnJ10gPT0gZm10ICkgewogICAgICAgICAgICAgICAgdGhpcy4kKCdjaGVja19mbXRfJytmbXQpLmlubmVySFRNTAogICAgICAgICAgICAgICAgICAgID0gJzxhIGhyZWY9Iicrc1snZm9ybWF0cyddW2ldWyd1cmwnXSsnJnRpdGxlPScraGRzdWl0ZS5jb252ZXJ0VGl0bGUocyxmb3JtYXQpKyciIHN0eWxlPSInK3RoaXMudHguZGwrJ2JvcmRlci1ib3R0b206NXB4IHNvbGlkICMnK2Zvcm1hdC5jb2xvcisnOyIgdGl0bGU9IicrZm9ybWF0LmRlc2MrJyI+Jytmb3JtYXQuaWNvbisnKCcrZm9ybWF0LnR5cGUrJyk8L2E+JzsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy4kKCdjaGVja19mbXRfJytmbXQpLmlubmVySFRNTAogICAgICAgICAgICA9ICc8c3BhbiBzdHlsZT0iJytoZHN1aXRlLnR4Lm1vbm8rJyI+Jytmb3JtYXQuaWNvbisnKCcrZm10KycpPC9zcGFuPic7CiAgICB9OwogICAgLyoqCiAgICAgKiBSZWRpcmVjdCBIaWdoZXIgUXVhbGl0eSBVUkwKICAgICAqLwogICAgdGhpcy5yZWRpcmVjdCA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICggIXRoaXMuY29uZmlnLnJlZGlyZWN0ICkgcmV0dXJuIGZhbHNlOyAgIC8vIFN0b3AgcmVkaXJlY3QgaWYgc3dpdGNoIG9mZgogICAgICAgIGlmICggbC5zZWFyY2guaW5kZXhPZignaGQ9MScpID4gLTEgKSByZXR1cm4gZmFsc2U7IC8vIFN0b3AgcmVkaXJlY3QgaWYgZm10IHBhcmFtIGV4aXN0cwoKICAgICAgICBsLnJlcGxhY2UobC5ocmVmICsgJyZoZD0xJyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgLyoqCiAgICAgKiBSZWRpcmVjdCBIaWdoZXIgUXVhbGl0eSBVUkwKICAgICAqLwogICAgdGhpcy5jaGVja1ZhcnMgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoIGwuaHJlZi5tYXRjaCgvd2F0Y2hcP3Y9KFthLXpBLVowLTlfLV0qKS8pICkgewogICAgICAgICAgICBtYXRjaCA9IFJlZ0V4cC4kMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8vIFJlbW90ZSBjaGVjawogICAgICAgIHZhciB1cmwgPSAnaHR0cDovLycrbC5ob3N0Kycvd2F0Y2g/dj0nK21hdGNoOwogICAgICAgIHZhciBYSFIgPSB0aGlzLmNyZWF0ZVhIUigpOwogICAgICAgIFhIUi5vcGVuKCAnR0VUJywgdXJsLCB0cnVlICk7CiAgICAgICAgWEhSLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgeyAKICAgICAgICAgICAgaWYgKFhIUi5yZWFkeVN0YXRlPT00KSB7CiAgICAgICAgICAgICAgICB2b2JqID0gaGRzdWl0ZS5nZXRWaWRlb09iamVjdChYSFIucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIHMgPSB2b2JqOwoKICAgICAgICAgICAgICAgIC8vIGFsd2F5cyB3YXRjaCBpbiBIaWdoZXN0IFF1YWxpdHkKICAgICAgICAgICAgICAgIGlmICggIWhkc3VpdGUucmVkaXJlY3QoKSApIHsKICAgICAgICAgICAgICAgICAgICBoZHN1aXRlLnNob3dEb3dubG9hZExpbmtzKCk7CiAgICAgICAgICAgICAgICAgICAgaGRzdWl0ZS52aXN1YWxpemUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBYSFIuc2VuZCgnJyk7CiAgICB9OwogICAgLyoqCiAgICAgKiBBZGQgRG93bmxvYWQgTGlua3MKICAgICAqLwogICAgdGhpcy5zaG93RG93bmxvYWRMaW5rcyA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmKCAhdGhpcy4kKCdoZHN1aXRlX2RsX2RpdicpICkgewogICAgICAgICAgICAvLyBDcmVhdGUgTGlua3MgQmxvY2sKICAgICAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGRpdi5pZCA9ICdoZHN1aXRlX2RsX2Rpdic7CiAgICAgICAgICAgIGRpdi5zdHlsZS5wYWRkaW5nID0gJzVweCc7CiAgICAgICAgICAgIGRpdi5zdHlsZS5tYXJnaW4gID0gJzAgMCA1cHggMCc7CiAgICAgICAgICAgIGRpdi5zdHlsZS5jb2xvciA9ICcjMzMzJzsKICAgICAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRUVFJzsKICAgICAgICAgICAgZGl2LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI0NDQyc7CiAgICAgICAgICAgIGRpdi5zdHlsZS5Nb3pCb3JkZXJSYWRpdXMgICAgPSAnNXB4JzsKICAgICAgICAgICAgZGl2LnN0eWxlLldlYmtpdEJvcmRlclJhZGl1cyA9ICc1cHgnOwogICAgICAgICAgICB0aGlzLiQoJ3dhdGNoLWhlYWRsaW5lJykuaW5zZXJ0QmVmb3JlKGRpdix0aGlzLiQoJ3dhdGNoLWhlYWRsaW5lLXRpdGxlJykpOwogICAgICAgIH0KICAgICAgICBmb3IgKCB2YXIgaT0wOyBpPHRoaXMuZm9ybWF0cy5sZW5ndGg7IGkrKyApIHsKICAgICAgICAgICAgY29uZmlnID0gdGhpcy5mb3JtYXRzW2ldWzFdOwogICAgICAgICAgICBmbXQgPSAwOwogICAgICAgICAgICBmb3IgKCB2YXIgaiBpbiB0aGlzLmNvbmZpZy5kb3dubG9hZF9mb3JtYXRzICkgewogICAgICAgICAgICAgICAgaWYgKCBjb25maWcuaWQgPT0gaiApIHsKICAgICAgICAgICAgICAgICAgICBmbXQgPSB0aGlzLmNvbmZpZy5kb3dubG9hZF9mb3JtYXRzW2pdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLiQoJ2hkc3VpdGVfZGxfZGl2JykuaW5uZXJIVE1MCiAgICAgICAgICAgICAgICArPSAnPGRpdiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luOjJweDsiIGlkPSJjaGVja19mbXRfJytjb25maWcuaWQrJyI+Zm10PScrY29uZmlnLmlkKyc8L2Rpdj4nOwogICAgICAgICAgICB0aGlzLmNoZWNrRm9ybWF0KGNvbmZpZy5pZCk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuc3ByaXRlID0KICAgICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsJysKICAgICdSMGxHT0RsaEtBQjRBTlUvQU9uL2tmL1UxUCtxY1pEUy85WFYxZjhCQVd4c2JOdi9TMGkyLy8rUVJ0Yi9NUCs1dVVWRlJmOXdjQUVCJysKICAgICdBU29xS3YvLy84ek16QUNaLy85bUFNei9BTnJhMnVmbjUvSHg4WWlJaVB6OC9QOUVST1RrNU0vUHordnI2K0RnNFBqNCtPN3U3dDNkJysKICAgICczYnU3dS8rSWlQWDE5WGZKLy96Lzd1VC9kLy9XdS9IL3U1bVptYy8vRWVyMi82cXFxbWJDLytEL1p2LzE3dmovM2J2ay8vOXdFVE90JysKICAgICcvLys0aVArRk14R2cvLy9DbWYrWm1mL3IzZTcvcXY5VlZmWC96UDk2SXYvLy95SDVCQUVBQUQ4QUxBQUFBQUFvQUhnQUFBYi93Sjh3JysKICAgICdRaXdhajBUaEQ4azBEaU9RcUhSS2hUeXJXT2tTR3MxWUtrWEM1a1BkU21HMXhHUnRFK2lvUkdtSFE5ellDZldNTkI3RnpkWUNnVDZBJysKICAgICdNSHRTSGtaU1lFUUVlaEJjRUFKcmExSnFiSVdQVVJaSGlrWWVVVncxazVSUmxvQ2dFQmwwaVZHTFJSZVpNSCtqbGFNVEtKbWJuSzFIJysKICAgICdJWm1pdHJXakNabXVSV1FRZUp4UXBwTnZFSVBCVUV5d2owZ1hVTFpydUJEYXQ5UFhvTmZaMnR6ZUtPQkhIUkFmMU9TMk9CQTY1MURHJysKICAgICdkUkRZU0puTnB5amV1VWdxQ0Z4VnhCY1VZTU1TSkpnMWlSZ1VWYnNnMklNRlJWYXdVclp3Y2VrUTBkaW5UQkJ3WElUUVRBQ3FLSWhlJysKICAgICdYYmlnTEVLams1RkdvWmhwWTVJTlRKQWd6R215WVVwTy96L2VKcGcwTk1XTEt6SElpSjVKWTlNTm5DeFFZVWF0a25PcVQ2dFlxbUlGJysKICAgICd1VlZwbHk5aHhqeWRZZ0xBQVFwb0ZaeUlNVGJLVGlZYkhIR0ZBR0FGMnJ0M1Q1aFFtcktKUzBlUVh1QWRuSFl2eUUyK291UTc4cEVMJysKICAgICdBQW9IcEtRZ1RPRUZLb2dSZXVJelFtQVZSUWdtN0ZJNEVXWHlYUVdpVXdDTXdPR0Ruc1VFSUlBZ1lwQXUyaFV4OXBxbW9BRENEclNSJysKICAgICc2eEg1dE1IRDRnanJsR1U2V3huQ2lSZTdLUUNBb0FCdHBpSWdNakNKdllFSU5naDNkNWlnM1BzRTJoVHBWamFCMEQzQzk3c3BvdU4xJysKICAgICdmajRkaUhaSXVIdUhFajRHZWZvVW9DZlJQZlprbGt3Y1VEQkhHbk40a1ZZZEJhdTFsa0ZMRVh3eVd3UzFQVVlCYmlZOGlQK1daYjlCJysKICAgICdsZ2xtalJnVndqb2tlSlpKYUlXVmRjQUIwL1dRR2tnY0VjRkJCOGlRMEY2RkoybTRJUUJzUWRDRGVSL0MxRmNUTDNFbEdHV25HWmJUJysKICAgICdXMGhvSmxWZFRKTG1WU3BnTVNMV1ZXU1pkZHBhYlhVMVYxZGFZVldtVldkT2xXWlVhMExWWmhadlppWG1sVk9BWU1FRkhjZ2xGUlV0JysKICAgICdZQ0NDQ2lDRU9jVWlYeVM1cHhRTU9PQUFCZ3c4RUNpZHN0a0kxanFRdHFEb29vbXF3Q1VWbTNSUWdRV3pXYkRwRkJnNG9BSURHRmlLJysKICAgICd3YWhTYk9MQnA0aUlDbW1wQnFCcXdLS3NSa0VDRWlUaytzaWxsK1owcGk1RXlBb3BCS1ZldXFxdkgxeVF3VW9rT090ckNDS0FJSUlJJysKICAgICdFVlNiNndXeHJvUklOWWVLY0t1ZjRqb2dRcTVOZ0R2L0pnVEFBbnN1blV4d29LZFc3Vjc2NktFUWJLS3VvRkdVK3E2Y1UzUndwd1VFJysKICAgICdGNXpVbUNyNGljSENEQ2UySnhqRXZzSnFvc202eStvR0ZYZ3EwTWE5WGxucnFReUVITEt3YytLTEpoWWFiMXhCeC9pQ0xESURKRmNSJysKICAgICdzWGUrVm56cHYrdmlVN0FGZUxDY3N3Z01ZL0NBQXpGSHhaR3hPVk9oQXE2UXBsd0JIVWlYNlhLaVRPTTdzM3MxMTR0em1SZnNiTUhCJysKICAgICdQd2VOZ2NPSGZpQnFCcTk2QUxaV0lhd0tRcTBHa0QxbVBoRDBaZWlZSWlnS3dhMktPc29xSHJIUkVRSWVsTzQ1OUFQc090Q29xYXorJysKICAgICdsVThHb2JMcWdLTjVPd0NDcW8zclYwR2tVVk14K2Q2S1E0RDVsWGhzUU1jWWhMTTZOTjl4RDYzcGxSR1RzRWxyck5vYy8wR3laR3YxJysKICAgICdSUVdCOG56dm9Zd3kwQUt5RHd6djY4a2x4MGxWeVVtcnlieFdKSVN3U3NiTFV4RUFEd1ZrcjBFTzFVdVJZcFNDQnBEOStOazNJQ2dpJysKICAgICdCSFJ3QVFnaEVIRndWUTBVc1AwQ0MyQmZRQUNzZ25GdysrcFdwY0g5VThEZUF2SlhGWDJ4Nm45VUdFRUJCbmdsaU8wTURQMmp3djlHJysKICAgICdRRUVLL28rQkQwdlhBY2xIUGd5T0NXTXE0eGlyR3FDQkVwcXdoUGc3bHZPU1J3VVFobkJsSXp6aENWT1lRV3Bza0lQWjgyQlZCQVlXJysKICAgICdEeGlNVlRtd1lBRWFVRUVhSnMyQUFLdUNBajE0UENSMkw0RUxoQk1WZUFnR0h4THNmVlFJNGdqK1IwUUtHckVxQmFMWmxmNkh3eWhlJysKICAgICd5WVVoOUJuOFpHakNMejd2alN5TTQ1eVV4eTh6d2Y5eGpuY1VFeDFaWlpTd3JJMEtMQmdBQWlSQVNCcVVnQVZoZ3RJUjR1S1ZBZHlBJysKICAgICdrSkNFNUNINTRoZEdBRVlLTG9pa0pndUp5TU5Vc2dpTmljSUFOa2xLRjF5R0F4eDQyaWMvdzRKSGtuS1RNZ0RJNWhiaEtTYlVacFNrJysKICAgICd4S1VFSUZBQ0NTQ2dHQkdZSlhJR3hJUk1ESktVRU1BbEx3bDVuV0JLaEZMUldvazA4ZkFkUXBiZ210Z3NnU2gzMlVzSnlBQWNzL1FaJysKICAgICdGU0FJQldaQ2hRYkw5Q1k0SmNLQlhvWFJQZVgwSlFMbVNjOG9aREtkM3h5UU1OdjVUbU8rRWdLWjVDWXpvYkFKTVNnRGxiYk1oQzQxJysKICAgICdlVXh2WnZLWER5SElLalBSeWxmQ2trYWZITTVKRm1wUlUzTGxTTnU1cEQwdHlrbHh5RUdpUnBDU05hVGd5RmRxVXdzZmZNRFNVYllFJysKICAgICdVMGdFc3FHRzdLUVd6TkNWSy9UMENSa3RnaEtDYW9RZ0FBQTcnOwoKICAgIC8qKgogICAgICogaW5pdAogICAgICovCiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLmdldENvbmZpZygpOwogICAgfTsKICAgIC8qKgogICAgICogY2hlY2tWZXJzaW9uCiAgICAgKi8KICAgIHRoaXMuY2hlY2tWZXJzaW9uID0gZnVuY3Rpb24oIGZvcmNlICkgewogICAgICAgIGlmICggIWZvcmNlICkgZm9yY2UgPSBmYWxzZTsKICAgICAgICAvLyBpZiB5b3UgZG9uJ3QgY2hlY2sgdmVyc2lvbiBpbiAyNGhvdXJzLCBjaGVjayB1cGRhdGUgYXV0b21hdGljYWxseS4KICAgICAgICB2YXIgbGFzdF91cGRhdGVfY2hlY2sgPSB0aGlzLmdldENvb2tpZSgnaGRzdWl0ZV9sYXN0X3VwZGF0ZV9jaGVjaycpOwogICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICBpZiAoIGZvcmNlIHx8ICFsYXN0X3VwZGF0ZV9jaGVjayB8fCAobm93IC0gbGFzdF91cGRhdGVfY2hlY2spID4gKDM2MDAgKiAyNCAqIDEwMDApICkgewogICAgICAgICAgICB0aGlzLmFkZENvb2tpZSgnaGRzdWl0ZV9sYXN0X3VwZGF0ZV9jaGVjaycsbm93KTsKICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOwogICAgICAgICAgICBzY3JpcHQuc3JjICA9ICdodHRwOi8vdXNlcnNjcmlwdHMub3JnL3NjcmlwdHMvc291cmNlLzkyOTIzLnVzZXIuanMnOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHJldiA9IHRoaXMuZ2V0Q29va2llKCdoZHN1aXRlX2xhc3RfdXBkYXRlX3JldicpOwogICAgICAgICAgICBpZiAoIHJldiA+IHRoaXMudmVyc2lvbi5yZXYgKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMuJCgnaGRzdWl0ZV91cGRhdGVfYnV0dG9uJyk7CiAgICAgICAgICAgICAgICBhLmhyZWYgPSAnaHR0cDovL3VzZXJzY3JpcHRzLm9yZy9zY3JpcHRzL3NvdXJjZS8zOTE2Ny51c2VyLmpzJzsKICAgICAgICAgICAgICAgIGEudGl0bGUgPSAnVXBkYXRlIG5vdyEhJzsKICAgICAgICAgICAgICAgIGEuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJy0yMHB4IDAnOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCn0KCi8qIGFkZCBDbGFzcyB0byBnbG9iYWwgKi8KdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwpzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOwpzY3JpcHQudGV4dAogICAgPSAndmFyIEhkU3VpdGUgPSAnICsgSGRTdWl0ZS50b1N0cmluZygpICsgJzsnCiAgICArICd2YXIgaGRzdWl0ZSA9IG5ldyBIZFN1aXRlKCk7JwpkLmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKCi8qIGFkZCBldmVudExpc3RlciBmb3IgY3Jvc3MgYnJvd3NlciAqLwpmdW5jdGlvbiBfQWRkRXZlbnRMaXN0ZW5lcihlLCB0eXBlLCBmbikgewogICAgaWYgKGUuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgZmFsc2UpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgZS5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGZuKHdpbmRvdy5ldmVudCk7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8qKgogKiBDb250cm9sbGVyCiAqLwp2YXIgaGRzdWl0ZSA9IG5ldyBIZFN1aXRlKCk7Cmhkc3VpdGUuaW5pdCgpOwovLyBXYXRjaGluZyBQYWdlCmlmICggbC5wYXRobmFtZS5tYXRjaCgvXC93YXRjaC8pICkgewogICAgaGRzdWl0ZS5jaGVja1ZhcnMoKTsKfQovLyBDaGFubmVsIFBhZ2UKZWxzZSBpZiAoIGwucGF0aG5hbWUubWF0Y2goL1wvdXNlci8pICkgewogICAgaWYgKCBoZHN1aXRlLmNvbmZpZy52aXN1YWxpemUgKSB7CiAgICAgICAgLy8gZm9yIFRhYiBDbGljawogICAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0OwogICAgICAgIF9BZGRFdmVudExpc3RlbmVyKAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheW5hdi1jaGFubmVsLWhlYWRlcicpLAogICAgICAgICAgICAiY2xpY2siLAogICAgICAgICAgICBmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoJ2hkc3VpdGUudmlzdWFsaXplKCknLDEwMDApOwogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgICBoZHN1aXRlLnZpc3VhbGl6ZSgpOwogICAgfQp9Ci8vIE90aGVyIFBhZ2UgKFRvcCwgQnJvd3NlLCBzZWFjaGUsIC4uLikKZWxzZSB7CiAgICBpZiAoIGhkc3VpdGUuY29uZmlnLnZpc3VhbGl6ZSApIHsKICAgICAgICAvLyBmb3IgQXV0byBQYWdlcgogICAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0OwogICAgICAgIF9BZGRFdmVudExpc3RlbmVyKAogICAgICAgICAgICB3LAogICAgICAgICAgICAic2Nyb2xsIiwKICAgICAgICAgICAgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICBpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsSGVpZ2h0ID4gMTAwKXsKICAgICAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIGhkc3VpdGUudmlzdWFsaXplKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICApOwogICAgICAgIGhkc3VpdGUudmlzdWFsaXplKCk7CiAgICB9Cn0KCmhkc3VpdGUuY3JlYXRlTWVudSgpOwpoZHN1aXRlLmNoZWNrVmVyc2lvbigpOwoKfSkoKTs="}]}